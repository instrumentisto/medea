syntax = "proto3";

package medea_callback;

service Callback {
  rpc OnEvent (Request) returns (Response);
}

message OnJoin {}

message OnLeave {
  Reason reason = 1;

  enum Reason {
    LOST_CONNECTION = 0;
    SERVER_SHUTDOWN = 1;
    ROOM_CLOSE = 2;
  }
}

message Request {
  // FID (Full ID) of element with which was occured event.
  string element = 1;
  // Time on which event occured.
  string at = 2;
  oneof event {
    OnJoin on_join = 3;
    OnLeave on_leave = 4;
  }
}

message Response {}