<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Medea's E2E test</title>
    <script type="module">
        import init, {Jason} from "/jason/medea_jason.js";

        let jason;

        async function getJason() {
            if (jason === undefined) {
                await init();
                jason = new Jason();
                return jason;
            } else {
                return jason;
            }
        }

        window.getJason = getJason;

        let loadedDiv = document.createElement('div');
        loadedDiv.id = 'loaded';
        document.body.appendChild(loadedDiv);

        window.onload = async () => {
            window.rust = await import("/jason/medea_jason.js");
        }
    </script>
</head>
<body></body>
</html>